-- LocalScript inside StarterGui > ScreenGui
-- Full Pet KG changer (visual + inventory KG + BillboardGui)

-- Create GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "PetKGChanger"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 300, 0, 180)
Frame.Position = UDim2.new(0.3, 0, 0.3, 0)
Frame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

local UIStroke = Instance.new("UIStroke", Frame)
UIStroke.Thickness = 2
UIStroke.Color = Color3.fromRGB(255, 255, 255)

local UICorner = Instance.new("UICorner", Frame)
UICorner.CornerRadius = UDim.new(0, 8)

-- Helper function for labels + textbox
local function createRow(yPos, labelText)
    local Label = Instance.new("TextLabel")
    Label.Size = UDim2.new(0, 80, 0, 30)
    Label.Position = UDim2.new(0, 10, 0, yPos)
    Label.BackgroundTransparency = 1
    Label.Text = labelText
    Label.TextColor3 = Color3.fromRGB(255, 255, 255)
    Label.TextSize = 16
    Label.Font = Enum.Font.GothamBold
    Label.TextXAlignment = Enum.TextXAlignment.Left
    Label.Parent = Frame

    local TextBox = Instance.new("TextBox")
    TextBox.Size = UDim2.new(0, 180, 0, 30)
    TextBox.Position = UDim2.new(0, 100, 0, yPos)
    TextBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    TextBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    TextBox.PlaceholderText = "Enter here..."
    TextBox.Font = Enum.Font.Gotham
    TextBox.TextSize = 16
    TextBox.Parent = Frame

    local corner = Instance.new("UICorner", TextBox)
    corner.CornerRadius = UDim.new(0, 6)

    return TextBox
end

-- Rows
local PetNameBox = createRow(20, "Pet Name:")
local OldKGBox = createRow(60, "Old KG:")
local NewKGBox = createRow(100, "New KG:")

-- Button
local ChangeBtn = Instance.new("TextButton")
ChangeBtn.Size = UDim2.new(0, 260, 0, 30)
ChangeBtn.Position = UDim2.new(0, 20, 0, 140)
ChangeBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
ChangeBtn.Text = "Change KG"
ChangeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
ChangeBtn.TextSize = 16
ChangeBtn.Font = Enum.Font.GothamBold
ChangeBtn.Parent = Frame
Instance.new("UICorner", ChangeBtn)

-- Main Function
ChangeBtn.MouseButton1Click:Connect(function()
    local petName = PetNameBox.Text
    local newKG = tonumber(NewKGBox.Text)

    if petName == "" or not newKG then
        warn("Please fill in Pet Name and New KG")
        return
    end

    -- Find pet in workspace
    local player = game.Players.LocalPlayer
    local char = player.Character or player.CharacterAdded:Wait()
    local pet = workspace:FindFirstChild(petName)

    if pet then
        -- BillboardGui display
        local bb = pet:FindFirstChild("PetKGDisplay") or Instance.new("BillboardGui")
        bb.Name = "PetKGDisplay"
        bb.Size = UDim2.new(0, 100, 0, 40)
        bb.StudsOffset = Vector3.new(0, 3, 0)
        bb.AlwaysOnTop = true
        bb.Parent = pet:FindFirstChildWhichIsA("HumanoidRootPart") or pet.PrimaryPart

        local label = bb:FindFirstChild("TextLabel") or Instance.new("TextLabel")
        label.Size = UDim2.new(1, 0, 1, 0)
        label.BackgroundTransparency = 1
        label.TextColor3 = Color3.fromRGB(255, 255, 0)
        label.TextScaled = true
        label.Font = Enum.Font.GothamBold
        label.Parent = bb
        label.Text = tostring(newKG) .. " KG"

        -- Scale pet size visually
        if pet.PrimaryPart then
            local scaleFactor = newKG / (tonumber(OldKGBox.Text) or newKG)
            pet:SetPrimaryPartCFrame(pet.PrimaryPart.CFrame) -- keep position
            for _, part in ipairs(pet:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.Size = part.Size * scaleFactor
                end
            end
        end

        -- Update inventory UI (visual only)
        local inv = player.PlayerGui:FindFirstChild("Inventory")
        if inv then
            for _, obj in ipairs(inv:GetDescendants()) do
                if obj:IsA("TextLabel") and string.find(obj.Text, petName) then
                    obj.Text = petName .. " - " .. tostring(newKG) .. " KG"
                end
            end
        end
    else
        warn("Pet not found in workspace.")
    end
end)
